chmod +x $(pwd)/multi_run.py
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 6460
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 6137
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 5814
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 5491

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e p_written_100k_vicuna_prompt_3_filtered_30 -p 2000 -c 6300
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e p_written_100k_vicuna_prompt_3_filtered_30 -p 2000 -c 5985
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e p_written_100k_vicuna_prompt_3_filtered_30 -p 2000 -c 5670

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e no_aug -p 2000 -c 40
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e no_aug -p 2000 -c 38
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e no_aug -p 2000 -c 36

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e no_aug -p 96 -c 80 
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e no_aug -p 96 -c 76
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e no_aug -p 96 -c 72

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 120 
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 60
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 180
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 360
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 540
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 720
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 900
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 1080
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 1200

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 390 
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 975
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 1560
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 2145
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 2730
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 3315
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 3900

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 6137
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e p_written_100k_vicuna_prompt_3_filtered_30 -p 2000 -c 5985
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e no_aug -p 2000 -c 38

# CUDA_VISIBLE_DEVICES=7 python zhiyuan/retriever/tasb/eval/evaluate_tasb.py --dataset_name fiqa --train_num 50 --exp_name base --dpr_v v1
# CUDA_VISIBLE_DEVICES=6 python zhiyuan/retriever/tasb/eval/evaluate_tasb.py --dataset_name msmarco --train_num 50 --exp_name base --dpr_v v1
# CUDA_VISIBLE_DEVICES=5 python zhiyuan/retriever/contriever/eval/evaluate_contriever.py --dataset_name fiqa --train_num 50 --exp_name base --dpr_v v1
# CUDA_VISIBLE_DEVICES=4 python zhiyuan/retriever/contriever/eval/evaluate_contriever.py --dataset_name msmarco --train_num 50 --exp_name base --dpr_v v1

# zhiyuan/retriever/col_bert/data/models/fiqa/no_aug/test/colbert-80
# zhiyuan/retriever/col_bert/data/models/fiqa/p_written_100k_vicuna_prompt_2_filtered_70/test/colbert-1080
# zhiyuan/retriever/col_bert/data/models/fiqa/llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70/test/colbert-1560

# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e no_aug -p 96 -c 80 
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e p_written_100k_vicuna_prompt_2_filtered_70 -p 96 -c 1080
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d fiqa -e llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 -p 96 -c 1560
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 6460
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e p_written_100k_vicuna_prompt_3_filtered_30 -p 2000 -c 6300
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e no_aug -p 2000 -c 40

# # fiqa
# CUDA_VISIBLE_DEVICES=2 python zhiyuan/dpr_contriever_eval.py --dataset_name fiqa --version v1 --gpu_id 0 --train_num 50 -exps no_aug --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=3 python zhiyuan/dpr_contriever_eval.py --dataset_name msmarco --version v1 --gpu_id 1 --train_num 50 -exps no_aug --weak_num 100k
# # fiqa
# CUDA_VISIBLE_DEVICES=4 python zhiyuan/dpr_contriever_eval.py --dataset_name fiqa --version v1 --gpu_id 2 --train_num 50 -exps p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=5 python zhiyuan/dpr_contriever_eval.py --dataset_name msmarco --version v1 --gpu_id 3 --train_num 50 -exps p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# # fiqa
# CUDA_VISIBLE_DEVICES=6 python zhiyuan/dpr_contriever_eval.py --dataset_name fiqa --version v1 --gpu_id 4 --train_num 50 -exps llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=7 python zhiyuan/dpr_contriever_eval.py --dataset_name msmarco --version v1 --gpu_id 5 --train_num 50 -exps llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k

# fiqa
# CUDA_VISIBLE_DEVICES=1 python zhiyuan/bm25ce_eval.py --dataset_name fiqa --version v1 --gpu_id 1 --train_num 50 -exps no_aug --weak_num 100k
# msmarco
# CUDA_VISIBLE_DEVICES=2 python zhiyuan/bm25ce_eval.py --dataset_name msmarco --version v1 --gpu_id 2 --train_num 50 -exps no_aug --weak_num 100k
# fiqa
# CUDA_VISIBLE_DEVICES=3 python zhiyuan/bm25ce_eval.py --dataset_name fiqa --version v1 --gpu_id 3 --train_num 50 -exps p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# msmarco
# CUDA_VISIBLE_DEVICES=4 python zhiyuan/bm25ce_eval.py --dataset_name msmarco --version v1 --gpu_id 4 --train_num 50 -exps p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# fiqa
# CUDA_VISIBLE_DEVICES=6 python zhiyuan/bm25ce_eval.py --dataset_name fiqa --version v1 --gpu_id 6 --train_num 50 -exps llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# msmarco
# CUDA_VISIBLE_DEVICES=7 python zhiyuan/bm25ce_eval.py --dataset_name msmarco --version v1 --gpu_id 7 --train_num 50 -exps llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k


# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 5491
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 5168
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 4845
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 4522
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 4199
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 3876
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 3553
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 3230
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 2907
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 2584
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 2261
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 1938
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 1615
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 1292
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 969
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 646
# bash zhiyuan/retriever/col_bert/test_colbert.sh -g 0,1,2,3,4,5,6,7 -d msmarco -e llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 -p 2000 -c 323

# # fiqa
# CUDA_VISIBLE_DEVICES=2 python zhiyuan/dpr_recontriever_eval.py --dataset_name fiqa --version v1 --gpu_id 2 --train_num 50 -exps no_aug --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=3 python zhiyuan/dpr_recontriever_eval.py --dataset_name msmarco --version v1 --gpu_id 3 --train_num 50 -exps no_aug --weak_num 100k
# # fiqa
# CUDA_VISIBLE_DEVICES=4 python zhiyuan/dpr_recontriever_eval.py --dataset_name fiqa --version v1 --gpu_id 4 --train_num 50 -exps p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=5 python zhiyuan/dpr_recontriever_eval.py --dataset_name msmarco --version v1 --gpu_id 5 --train_num 50 -exps p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# # fiqa
# CUDA_VISIBLE_DEVICES=6 python zhiyuan/dpr_recontriever_eval.py --dataset_name fiqa --version v1 --gpu_id 6 --train_num 50 -exps llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# # msmarco
# CUDA_VISIBLE_DEVICES=7 python zhiyuan/dpr_recontriever_eval.py --dataset_name msmarco --version v1 --gpu_id 7 --train_num 50 -exps llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k

# CUDA_VISIBLE_DEVICES=0 python zhiyuan/retriever/recontriever/eval/evaluate_recontriever.py --dataset_name fiqa --dpr_v v1 --train_num 50 --exp_name base
# CUDA_VISIBLE_DEVICES=1 python zhiyuan/retriever/recontriever/eval/evaluate_recontriever.py --dataset_name msmarco --dpr_v v1 --train_num 50 --exp_name base

parser.add_argument('--dataset_name', required=False, default="msmarco", type=str)
parser.add_argument('--train_num', required=False, default=50, type=int)
parser.add_argument('--weak_num', required=False, default="5000", type=str)
parser.add_argument('--exp_name', required=False, default="no_aug", type=str)
# fiqa
CUDA_VISIBLE_DEVICES=2 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name fiqa --exp_name no_aug --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=3 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name msmarco --exp_name no_aug --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=4 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name fiqa --exp_name p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=5 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name msmarco --exp_name p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=6 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name fiqa --exp_name llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=7 python -m zhiyuan.retriever.dpr_tasb.train.tasb_clustering --dataset_name msmarco --exp_name llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k

# fiqa
CUDA_VISIBLE_DEVICES=0 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name fiqa --exp_name no_aug --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=1 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name msmarco --exp_name no_aug --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=2 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name fiqa --exp_name p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=3 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name msmarco --exp_name p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=4 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name fiqa --exp_name llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=6 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name msmarco --exp_name llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k

CUDA_VISIBLE_DEVICES=6 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name msmarco --exp_name p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
CUDA_VISIBLE_DEVICES=7 python -m zhiyuan.retriever.dpr_tasb.train.tasb_bertcat_score --dataset_name msmarco --exp_name llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k


# fiqa
CUDA_VISIBLE_DEVICES=2 python zhiyuan/dpr_tasb_eval.py --dataset_name fiqa --version v1 --gpu_id 2 --train_num 50 -exps no_aug --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=3 python zhiyuan/dpr_tasb_eval.py --dataset_name msmarco --version v1 --gpu_id 3 --train_num 50 -exps no_aug --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=4 python zhiyuan/dpr_tasb_eval.py --dataset_name fiqa --version v1 --gpu_id 4 --train_num 50 -exps p_written_100k_vicuna_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=6 python zhiyuan/dpr_tasb_eval.py --dataset_name msmarco --version v1 --gpu_id 5 --train_num 50 -exps p_written_100k_vicuna_prompt_3_filtered_30 --weak_num 100k
# fiqa
CUDA_VISIBLE_DEVICES=5 python zhiyuan/dpr_tasb_eval.py --dataset_name fiqa --version v1 --gpu_id 6 --train_num 50 -exps llama_7b_100k_fixed_v3_best_llama_prompt_2_filtered_70 --weak_num 100k
# msmarco
CUDA_VISIBLE_DEVICES=7 python zhiyuan/dpr_tasb_eval.py --dataset_name msmarco --version v1 --gpu_id 7 --train_num 50 -exps llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --weak_num 100k

CUDA_VISIBLE_DEVICES=0 python zhiyuan/retriever/dpr_tasb/eval/evaluate_tasb.py --dataset_name msmarco --train_num 50 --exp_name no_aug --dpr_v v1
CUDA_VISIBLE_DEVICES=1 python zhiyuan/retriever/dpr_tasb/eval/evaluate_tasb.py --dataset_name msmarco --train_num 50 --exp_name p_written_100k_vicuna_prompt_3_filtered_30 --dpr_v v1
CUDA_VISIBLE_DEVICES=2 python zhiyuan/retriever/dpr_tasb/eval/evaluate_tasb.py --dataset_name msmarco --train_num 50 --exp_name llama_7b_100k_fixed_v4_best_llama_prompt_3_filtered_30 --dpr_v v1